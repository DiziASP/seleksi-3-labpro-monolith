{% extends 'core/base.html' %}
{% block content %}
<!-- Navbar Section -->
<nav class="bg-white border-gray-200 dark:bg-gray-900">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
      <a href="{% url 'api-product' %}" class="flex items-center">
          <img src="https://avatars.githubusercontent.com/u/58800976?v=4" class="h-10 mr-3 rounded-full" alt="Flowbite Logo" />
          <span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">BelanjaBelinji</span>
      </a>
      <button data-collapse-toggle="navbar-default" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-default" aria-expanded="false">
          <span class="sr-only">Open main menu</span>
          <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
          </svg>
      </button>
      <div class="hidden w-full md:block md:w-auto" id="navbar-default">
        <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg 
        bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 
        md:dark:bg-gray-900 dark:border-gray-700">
          <li>
            <a href="{% url 'api-product' %}" class="block py-2 pl-3 pr-4 text-white bg-blue-500 
            rounded md:bg-transparent md:text-blue-500 md:p-0 
            dark:text-white md:dark:text-blue-500" aria-current="page">Catalogue</a>
          </li>
          <li>
            <a href="{% url 'purchase-history' %}" class="block py-2 pl-3 pr-4 text-gray-900 
            rounded hover:bg-gray-100 md:hover:bg-transparent 
            md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white 
            md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Riwayat</a>
          </li>
          <li>
            <a href="{% url 'auth_logout' %}" class="block py-2 pl-3 pr-4 text-gray-900 
            rounded hover:bg-gray-100 md:hover:bg-transparent 
            md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white 
            md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Sign Out</a>
          </li>
        </ul>
      </div>
    </div>
</nav>

<main class="min-h-[52.3125rem] flex flex-col max-w-screen-xl items-center mx-auto py-8">
    <div class="text-center">
        <div class="flex justify-center">
          <div class="max-w-[800px]">
            <h2 class="mb-12 text-5xl font-semibold tracking-tight gap-4 md:text-6xl xl:text-7xl">
              Mas/Mbak, <br />
              <span class="text-purple-400 font-bold">dibeli yu :< </span>
            </h2>
            <p class="text-lg text-dark-200">
              Apa mau minum? Teh ada, Tea ice ada, Teh tarik ada, Milo ice, Teh panas, Bali ice, Air kosong, Air soda
              Makan? Roti kosong ada, roti cane, roti bantal, mi goreng, nasi goreng, nasi goreng telor, nasi lemak ada, nasi kuning petai ada
              <span class="font-bold text-xl text-purple-400"> Semua pun ada!</span>
            </p>
          </div>
        </div>
    </div>
    
    <div class="relative overflow-x-auto w-full py-4">
        <!-- Search Bar -->
        <form action="{% url 'api-product' %}" method="GET">
            <label for="default-search" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                    <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                    </svg>
                </div>
                
                <input type="search" id="default-search" class="block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 
                rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 
                dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" 
                name="q"
                placeholder="Search stuffs...">
                
                <button type="submit" class="text-white absolute right-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 
                focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 
                dark:hover:bg-blue-700 dark:focus:ring-blue-800">Search</button>
            </div>
        </form>
    
        <!-- Products Table -->
        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
            <thead class="text-sm text-gray-900 uppercase dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3">
                        Product name
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Stock
                    </th>
    
                    <th scope="col" class="px-6 py-3">
                        Price
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for product in data %}
                <tr class="bg-white dark:bg-gray-700">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        {{ product.nama }}
                    </th>
                    <td class="px-6 py-4 text-gray-900 dark:text-white">
                        {{ product.stok }}
                    </td>
                    <td class="px-6 py-4  text-gray-900 dark:text-white">
                        Rp {{ product.harga }},-
                    </td>
                    <td class="px-6 py-4">
                        <a href="{% url 'api-product-details' pk=product.id %}" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Buy now</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation">
      <ul class="inline-flex -space-x-px text-sm mt-2">
        {% for pg in data.paginator.page_range %}
          {% if data.number == pg %}
            <li><a href="?page={{pg}}" class="flex items-center justify-center px-3 h-8 
              leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 
              hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 
              dark:hover:bg-gray-700 dark:hover:text-white">{{pg}}</a></li>
          {% else %}
            <li><a href="?page={{pg}}" class="flex items-center justify-center px-3 h-8 
              leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 
              hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 
              dark:hover:bg-gray-700 dark:hover:text-white">{{pg}}</a></li>
          {% endif %}
        {% endfor %}
      </ul>
    </nav>
</main>

<!-- Footer Section -->
<footer class="bg-white shadow dark:bg-gray-800">
    <div class="w-full mx-auto max-w-screen-xl p-4 md:flex md:items-center md:justify-between">
    <span class="text-sm text-gray-500 sm:text-center dark:text-gray-400">© 2023 <a href="https://github.com/DiziASP/" class="hover:underline">Dizi™</a>. All Rights Reserved.
    </span>
    <span class="text-sm text-gray-500 sm:text-center dark:text-gray-400">
      Made of ❤️ and ☕ with 
      <a href="https://www.djangoproject.com/"">
        <span class="font-bold text-blue-500">Django</span>
      </a> and 
      <a href="https://tailwindcss.com/"">
          <span class="font-bold text-blue-400">TailwindCSS</span>
        </a> 
    </span>
    </div>
</footer>  
{% if messages %}
{% for message in messages %}
<script>
  alert("{{ message }}");
</script>
{% endfor %}
{% endif %}

{% endblock %}